schema: '2.0'
stages:
  compile@attack:
    cmd: python -m deckard.layers.compile --report_folder mnist/reports/attack --results_file
      mnist/reports/attack.csv
    deps:
    - path: mnist/reports/attack/
      hash: md5
      md5: a2694f8e9ea5c5ff400d11fa1d98001d.dir
      size: 21895572255
      nfiles: 53006
    - path: mnist/reports/attack/ResNet101.db
      md5: 600452804d96c8b8483c3f8da01130c4
      size: 462848
    - path: mnist/reports/attack/ResNet18.db
      md5: 920b0ed178ec504c0d7990777862283f
      size: 1363968
    - path: mnist/reports/attack/ResNet34.db
      md5: 3f56dd2ea0783a56a2a9e3eaaad88c21
      size: 1945600
    - path: mnist/reports/attack/ResNet50.db
      md5: d9ee221b942b56d9bb720e022e05bf4b
      size: 462848
    outs:
    - path: mnist/reports/attack.csv
      hash: md5
      md5: aa61d0f5118327d164cfc37a466e5162
      size: 47376297
  plot:
    cmd: python -m deckard.layers.plots --path mnist/plots/ --file mnist/reports/attack.csv
      -o data.csv
    deps:
    - path: mnist/reports/attack.csv
      hash: md5
      md5: 713d3512070894820a1deb87af405779
      size: 48722791
    - path: mnist/reports/attack/ResNet101.db
      md5: 600452804d96c8b8483c3f8da01130c4
      size: 462848
    - path: mnist/reports/attack/ResNet152.db
      md5: afb6f3d2616446226012b3ff1143086a
      size: 462848
    - path: mnist/reports/attack/ResNet18.db
      md5: 920b0ed178ec504c0d7990777862283f
      size: 1363968
    - path: mnist/reports/attack/ResNet34.db
      md5: 3f56dd2ea0783a56a2a9e3eaaad88c21
      size: 1945600
    - path: mnist/reports/attack/ResNet50.db
      md5: d9ee221b942b56d9bb720e022e05bf4b
      size: 462848
    outs:
    - path: mnist/plots/data.csv
      hash: md5
      md5: e9f98491c865d57cfa6e192e2fcd2a27
      size: 20472844
  afr:
    cmd: python -m deckard.layers.afr --dataset mnist --data_file mnist/plots/data.csv
      --target adv_accuracy --duration_col adv_fit_time --dataset mnist
    deps:
    - path: mnist/plots/data.csv
      hash: md5
      md5: db610c0ad15bbf4dbab8c6fefa65ceb5
      size: 20582718
    outs:
    - path: mnist/plots/aft_comparison.csv
      hash: md5
      md5: e29b7fbd967e947ae0a3273a0204f14e
      size: 230
    - path: mnist/plots/aft_comparison.tex
      hash: md5
      md5: cf74753dd3b31cc18fb6d56f015cb231
      size: 559
    - path: mnist/plots/cox_aft.pdf
      hash: md5
      md5: fa919a94982207e3eb6ea131fd30916c
      size: 31116
    - path: mnist/plots/cox_partial_effects.pdf
      hash: md5
      md5: 6bc299bbdc9ebf1e72e7ddfcd64dbac2
      size: 45205
    - path: mnist/plots/log_logistic_aft.pdf
      hash: md5
      md5: d84975623591c5235dbf677ebe33a648
      size: 33200
    - path: mnist/plots/log_logistic_partial_effects.pdf
      hash: md5
      md5: c2186f297bc4471bf8a1042a425e7acd
      size: 30586
    - path: mnist/plots/log_normal_aft.pdf
      hash: md5
      md5: 5d9115448e7410c087adfd3d3c082c8e
      size: 33689
    - path: mnist/plots/log_normal_partial_effects.pdf
      hash: md5
      md5: 405ae21731b2b4756b4bfab27bc44e1b
      size: 31186
    - path: mnist/plots/weibull_aft.pdf
      hash: md5
      md5: 886dfbe31cbacece7435fc85cb9bcf02
      size: 31858
    - path: mnist/plots/weibull_partial_effects.pdf
      hash: md5
      md5: 4cae830f6a9593a9c3007643381c5998
      size: 30914
  copy_results:
    cmd: cp -r mnist/plots/* ~/ml_afr/mnist/
    deps:
    - path: mnist/plots/aft_comparison.csv
      hash: md5
      md5: e29b7fbd967e947ae0a3273a0204f14e
      size: 230
    - path: mnist/plots/data.csv
      hash: md5
      md5: db610c0ad15bbf4dbab8c6fefa65ceb5
      size: 20582718
