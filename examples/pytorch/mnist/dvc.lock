schema: '2.0'
stages:
  compile@attack:
    cmd: python -m deckard.layers.compile --report_folder mnist/reports/attack --results_file
      mnist/reports/attack.csv
    deps:
    - path: mnist/reports/attack/
      hash: md5
      md5: a2694f8e9ea5c5ff400d11fa1d98001d.dir
      size: 21895572255
      nfiles: 53006
    - path: mnist/reports/attack/ResNet101.db
      md5: 600452804d96c8b8483c3f8da01130c4
      size: 462848
    - path: mnist/reports/attack/ResNet18.db
      md5: 920b0ed178ec504c0d7990777862283f
      size: 1363968
    - path: mnist/reports/attack/ResNet34.db
      md5: 3f56dd2ea0783a56a2a9e3eaaad88c21
      size: 1945600
    - path: mnist/reports/attack/ResNet50.db
      md5: d9ee221b942b56d9bb720e022e05bf4b
      size: 462848
    outs:
    - path: mnist/reports/attack.csv
      hash: md5
      md5: aa61d0f5118327d164cfc37a466e5162
      size: 47376297
  plot:
    cmd: python -m deckard.layers.plots --path mnist/plots/ --file mnist/reports/clean_attack.csv
    deps:
    - path: mnist/reports/clean_attack.csv
      hash: md5
      md5: 30e2947d1544fd789c630906b08624c5
      size: 13990463
    outs:
    - path: mnist/plots/adv_accuracy_vs_attack_type.pdf
      hash: md5
      md5: 676f98736f2a5373bd063007d850aa37
      size: 31913
    - path: mnist/plots/adv_accuracy_vs_defence_type.pdf
      hash: md5
      md5: db2c4d59c424782ffd8e30c4ea0e4439
      size: 30726
    - path: mnist/plots/adv_failure_rate_vs_train_time.pdf
      hash: md5
      md5: 6e18c7e499471251eba37c294e4c5530
      size: 79819
    - path: mnist/plots/adv_failures_per_test_time_vs_defence_type.pdf
      hash: md5
      md5: 137f7b20ed2e4d13a3254c7584580bfa
      size: 36894
    - path: mnist/plots/adv_failures_per_train_time_vs_attack_type.pdf
      hash: md5
      md5: 8b0cd3d52f700d8267c1845d120b92bd
      size: 40419
    - path: mnist/plots/adv_failures_per_train_time_vs_defence_type.pdf
      hash: md5
      md5: 2c01f24916a257b8be36df560ad9a69e
      size: 33734
    - path: mnist/plots/atk_param_vs_accuracy.pdf
      hash: md5
      md5: 022842a2c1e687f6ac0414aab4d1be06
      size: 20224
    - path: mnist/plots/ben_accuracy_vs_defence_type.pdf
      hash: md5
      md5: 4921ffdaa6fe7b0394289dd12ff7b4e4
      size: 27434
    - path: mnist/plots/ben_failure_rate_vs_defence_type.pdf
      hash: md5
      md5: 8503d4e036a493fe04af79e5d8b84b16
      size: 39288
    - path: mnist/plots/ben_failures_per_train_time_vs_defence_type.pdf
      hash: md5
      md5: 4184641a05ff88445386661b1b2524e8
      size: 33960
    - path: mnist/plots/def_param_vs_accuracy.pdf
      hash: md5
      md5: 0327657560364fb31b6c64570f7fa710
      size: 19267
    - path: mnist/plots/def_param_vs_adv_accuracy.pdf
      hash: md5
      md5: a57a94e2fdf36835db40986e723dae8a
      size: 18581
    - path: mnist/plots/def_param_vs_adv_failure_rate.pdf
      hash: md5
      md5: ca26a65c50e1b76ff138fc91bd144a65
      size: 22342
  afr:
    cmd: python -m deckard.layers.afr --dataset mnist --data_file mnist/plots/data.csv
      --target adv_accuracy --duration_col adv_fit_time --dataset mnist
    deps:
    - path: mnist/plots/data.csv
      hash: md5
      md5: db610c0ad15bbf4dbab8c6fefa65ceb5
      size: 20582718
    outs:
    - path: mnist/plots/aft_comparison.csv
      hash: md5
      md5: e29b7fbd967e947ae0a3273a0204f14e
      size: 230
    - path: mnist/plots/aft_comparison.tex
      hash: md5
      md5: cf74753dd3b31cc18fb6d56f015cb231
      size: 559
    - path: mnist/plots/cox_aft.pdf
      hash: md5
      md5: fa919a94982207e3eb6ea131fd30916c
      size: 31116
    - path: mnist/plots/cox_partial_effects.pdf
      hash: md5
      md5: 6bc299bbdc9ebf1e72e7ddfcd64dbac2
      size: 45205
    - path: mnist/plots/log_logistic_aft.pdf
      hash: md5
      md5: d84975623591c5235dbf677ebe33a648
      size: 33200
    - path: mnist/plots/log_logistic_partial_effects.pdf
      hash: md5
      md5: c2186f297bc4471bf8a1042a425e7acd
      size: 30586
    - path: mnist/plots/log_normal_aft.pdf
      hash: md5
      md5: 5d9115448e7410c087adfd3d3c082c8e
      size: 33689
    - path: mnist/plots/log_normal_partial_effects.pdf
      hash: md5
      md5: 405ae21731b2b4756b4bfab27bc44e1b
      size: 31186
    - path: mnist/plots/weibull_aft.pdf
      hash: md5
      md5: 886dfbe31cbacece7435fc85cb9bcf02
      size: 31858
    - path: mnist/plots/weibull_partial_effects.pdf
      hash: md5
      md5: 4cae830f6a9593a9c3007643381c5998
      size: 30914
  copy_results:
    cmd: cp -r mnist/plots/* ~/ml_afr/mnist/
    deps:
    - path: mnist/plots/aft_comparison.csv
      hash: md5
      md5: e29b7fbd967e947ae0a3273a0204f14e
      size: 230
    - path: mnist/plots/data.csv
      hash: md5
      md5: db610c0ad15bbf4dbab8c6fefa65ceb5
      size: 20582718
  clean@attack:
    cmd: python -m deckard.layers.clean_data -i mnist/reports/attack.csv -o mnist/reports/clean_attack.csv
      -c conf/clean.yaml
    deps:
    - path: mnist/reports/attack.csv
      hash: md5
      md5: aa61d0f5118327d164cfc37a466e5162
      size: 47376297
    outs:
    - path: mnist/reports/clean_attack.csv
      hash: md5
      md5: 30e2947d1544fd789c630906b08624c5
      size: 13990463
